<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>介绍 | Transition</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="自定义动效插件">
    <link rel="preload" href="/assets/css/0.styles.33e28f23.css" as="style"><link rel="preload" href="/assets/js/app.469a78f3.js" as="script"><link rel="preload" href="/assets/js/2.bc631fca.js" as="script"><link rel="preload" href="/assets/js/14.bd3b3329.js" as="script"><link rel="prefetch" href="/assets/js/10.ec1297a1.js"><link rel="prefetch" href="/assets/js/11.2c4b5751.js"><link rel="prefetch" href="/assets/js/12.ce4a1684.js"><link rel="prefetch" href="/assets/js/13.eff1179a.js"><link rel="prefetch" href="/assets/js/15.70c5fa5f.js"><link rel="prefetch" href="/assets/js/3.6ec0484c.js"><link rel="prefetch" href="/assets/js/4.b8e98abc.js"><link rel="prefetch" href="/assets/js/5.e6d65396.js"><link rel="prefetch" href="/assets/js/6.5685e412.js"><link rel="prefetch" href="/assets/js/7.5958d640.js"><link rel="prefetch" href="/assets/js/8.666e5d87.js"><link rel="prefetch" href="/assets/js/9.17ee536b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.33e28f23.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Transition</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-exact-active router-link-active">
  指南
</a></div><div class="nav-item"><a href="/draw/" class="nav-link">
  绘制
</a></div><div class="nav-item"><a href="/curveTable/" class="nav-link">
  曲线表
</a></div><div class="nav-item"><a href="https://github.com/DataV-Team/Transition" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-exact-active router-link-active">
  指南
</a></div><div class="nav-item"><a href="/draw/" class="nav-link">
  绘制
</a></div><div class="nav-item"><a href="/curveTable/" class="nav-link">
  曲线表
</a></div><div class="nav-item"><a href="https://github.com/DataV-Team/Transition" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/guide/" class="active sidebar-link">介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/guide/#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/guide/#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/guide/#快速体验" class="sidebar-link">快速体验</a></li><li class="sidebar-sub-header"><a href="/guide/#api" class="sidebar-link">API</a></li><li class="sidebar-sub-header"><a href="/guide/#transition" class="sidebar-link">transition</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/#number" class="sidebar-link">number</a></li><li class="sidebar-sub-header"><a href="/guide/#array" class="sidebar-link">array</a></li><li class="sidebar-sub-header"><a href="/guide/#object" class="sidebar-link">object</a></li><li class="sidebar-sub-header"><a href="/guide/#deep" class="sidebar-link">deep</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/#entendcurves" class="sidebar-link">entendCurves</a></li><li class="sidebar-sub-header"><a href="/guide/#createanimator" class="sidebar-link">createAnimator</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h1> <p><strong>Transition</strong>是一个动效插件，用于在<strong>JS</strong>环境下的动效状态计算。</p> <p>我们可以使用<strong>动画起始状态</strong>、<strong>动画结束状态</strong>、<strong>过渡动效</strong>、<strong>动画时长(帧数)</strong> 这四个参数去精确描述一段动画，<strong>Transition</strong>可以根据上述参数计算出动画每一帧的状态，这样按序绘制出每一帧，动画就产生了。</p> <p><strong>Transition</strong>内置了常用的基础动效<a href="/curveTable/">(曲线表)</a>，它们是基于 <em>tween.js</em> 封装的。与 <em>tween.js</em>不同的是<strong>Transition</strong>还支持自定义动效，扩展基础动效曲线<a href="/draw/">(绘制动效曲线)</a>。</p> <h2 id="实现"><a href="#实现" class="header-anchor">#</a> 实现</h2> <p>三次方贝塞尔曲线由四个点构成 <strong><em>P</em><sub>0</sub>、<em>P</em><sub>1</sub>、<em>P</em><sub>2</sub>、<em>P</em><sub>3</sub></strong>。<strong><em>P</em><sub>0</sub></strong> 与 <strong><em>P</em><sub>3</sub></strong> 分别为曲线起始点与结束点，<strong><em>P</em><sub>1</sub></strong> 与 <strong><em>P</em><sub>2</sub></strong> 分别为曲线的两个控制点，但曲线通常不会经过这两个点，曲线公式如下：</p> <ul><li>三次方贝塞尔曲线</li></ul> <p><strong>B(<em>t</em>) = P<sub>0</sub>(1 - <em>t</em>)<sup>3</sup> + 3P<sub>1</sub><em>t</em>(1 - t)<sup>2</sup> + 3P<sub>2</sub><em>t</em><sup>2</sup>(1 - t) + P<sub>3</sub><em>t</em><sup>3</sup></strong></p> <p>由公式可知，我们可以获取范围内任意时刻曲线上一点的点坐标 <strong>(<em>t</em>: [0 - 1])</strong> 。将曲线起始点与终止点抽象成动画开始与结束，范围内任意时刻的点即对应该时刻动画过渡所属帧的状态位置。</p> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <ul><li>npm 安装</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> @jiaminghi/transition
</code></pre></div><ul><li>yarn 安装</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> @jiaminghi/transition
</code></pre></div><h2 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> transition<span class="token punctuation">,</span> extendCurves<span class="token punctuation">,</span> createAnimator <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@jiaminghi/transition'</span>

<span class="token comment">// do something</span>
</code></pre></div><h2 id="快速体验"><a href="#快速体验" class="header-anchor">#</a> 快速体验</h2> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--调试版--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/@jiaminghi/transition/dist/index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--压缩版--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/@jiaminghi/transition/dist/index.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> <span class="token punctuation">{</span> transition<span class="token punctuation">,</span> extendCurves<span class="token punctuation">,</span> createAnimator <span class="token punctuation">}</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>Transition

  <span class="token comment">// do something</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="api"><a href="#api" class="header-anchor">#</a> API</h2> <p><strong>Transition</strong>内置了 3 个 API：</p> <ul><li><p><em>transition</em>是用于计算动画过渡帧状态</p></li> <li><p><em>extendCurves</em>扩展内置缓动曲线，便于复用</p></li> <li><p><em>createAnimator</em>简单的动画器支持</p></li></ul> <h2 id="transition"><a href="#transition" class="header-anchor">#</a> transition</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/**
 * @description 根据动效曲线、起始状态、结束状态、动画帧数获取动画每一帧的状态
 * 递归模式下将计算状态的深层属性
 * @param {EaseCurve} easeCurve 动效曲线或曲线数据
 * @param {Any} startState      动画起始状态
 * @param {Any} endState        动画结束状态
 * @param {Number} frameNum     动画帧数
 * @param {Boolean} deep        是否启用递归模式
 * @return {Array} 每一帧的动画的状态数据
 */</span>
<span class="token keyword">type</span> transition <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
  <span class="token parameter">easeCurve<span class="token operator">:</span> EaseCurve<span class="token punctuation">,</span>
  startState<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
  endState<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
  frameNum <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span>
  deep <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="number"><a href="#number" class="header-anchor">#</a> number</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> transition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@jiaminghi/transition'</span>

<span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">const</span> end <span class="token operator">=</span> <span class="token number">100</span>
<span class="token keyword">const</span> frameNum <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">const</span> easeCurve <span class="token operator">=</span> <span class="token string">'linear'</span>

<span class="token function">transition</span><span class="token punctuation">(</span>easeCurve<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> frameNum<span class="token punctuation">)</span>
<span class="token comment">/**
 * [
 *    0, 11.111111111111112, 22.222222222222225,
 *    33.333333333333336, 44.44444444444445, 55.55555555555556,
 *    66.66666666666667, 77.77777777777779, 88.8888888888889, 100
 * ]
 */</span>
</code></pre></div><h3 id="array"><a href="#array" class="header-anchor">#</a> array</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> transition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@jiaminghi/transition'</span>

<span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> end <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> frameNum <span class="token operator">=</span> <span class="token number">3</span>
<span class="token keyword">const</span> easeCurve <span class="token operator">=</span> <span class="token string">'linear'</span>

<span class="token function">transition</span><span class="token punctuation">(</span>easeCurve<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> frameNum<span class="token punctuation">)</span>
<span class="token comment">/**
 * [
 *    [10, 20, 30],
 *    [55, 110, 165],
 *    [100, 200, 300]
 * ]
 */</span>
</code></pre></div><h3 id="object"><a href="#object" class="header-anchor">#</a> object</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> transition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@jiaminghi/transition'</span>

<span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> end <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> frameNum <span class="token operator">=</span> <span class="token number">3</span>
<span class="token keyword">const</span> easeCurve <span class="token operator">=</span> <span class="token string">'linear'</span>

<span class="token function">transition</span><span class="token punctuation">(</span>easeCurve<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> frameNum<span class="token punctuation">)</span>
<span class="token comment">/**
 * [
 *    { x: 0, y: 20 },
 *    { x: 50, y: 110 },
 *    { x: 100, y: 200 }
 * ]
 */</span>
</code></pre></div><h3 id="deep"><a href="#deep" class="header-anchor">#</a> deep</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> transition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@jiaminghi/transition'</span>

<span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> radius<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> z<span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> end <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> radius<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> z<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> frameNum <span class="token operator">=</span> <span class="token number">3</span>
<span class="token keyword">const</span> easeCurve <span class="token operator">=</span> <span class="token string">'linear'</span>
<span class="token keyword">const</span> deep <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token function">transition</span><span class="token punctuation">(</span>easeCurve<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> frameNum<span class="token punctuation">,</span> deep<span class="token punctuation">)</span>
<span class="token comment">/**
 * [
 *    { x: 0, y: 20, radius: [10, 20, { z: 30 }] },
 *    { x: 50, y: 110, radius: [30, 55, { z: 20 }] },
 *    { x: 100, y: 200, radius: [50, 90, { z: 10 }] },
 * ]
 */</span>
</code></pre></div><h2 id="entendcurves"><a href="#entendcurves" class="header-anchor">#</a> entendCurves</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/**
 * @description 扩展动效曲线
 * 可以将自定义的动效曲线扩展至基础动效曲线
 * @param {string} curveName      曲线名
 * @param {TransitionCurve} curve 曲线数据
 * @return {boolean} 扩展结果
 */</span>
<span class="token keyword">type</span> <span class="token function-variable function">extendCurves</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">curveName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> transitionCurve<span class="token operator">:</span> TransitionCurve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span>
</code></pre></div><h2 id="createanimator"><a href="#createanimator" class="header-anchor">#</a> createAnimator</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/**
 * @description 绘制器
 * 根据传入的帧状态和帧索引绘制当前帧
 * @param {any} frameState    单帧动画状态
 * @param {number} frameIndex 当前帧索引
 * @return {false} 如果返回false 将结束动画
 */</span>
<span class="token keyword">type</span> Render<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">frameState<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> frameIndex<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">false</span>

<span class="token comment">/**
 * @description 接受一个绘制器返回一个动画器
 * 传入动画状态队列将自动调用绘制器进行动画绘制
 * @param {Render} render 绘制器
 * @return {Function} 动画器
 */</span>
<span class="token keyword">type</span> createAnimator <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">render<span class="token operator">:</span> Render<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>

<span class="token comment">// 示例 渲染一个方块的位移动画</span>
<span class="token keyword">const</span> square <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#square'</span><span class="token punctuation">)</span>

<span class="token comment">// 定义起止状态</span>
<span class="token keyword">type</span> SquareState <span class="token operator">=</span> <span class="token punctuation">{</span> left<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> width<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> startState<span class="token operator">:</span> SquareState <span class="token operator">=</span> <span class="token punctuation">{</span> left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> endState<span class="token operator">:</span> SquareState <span class="token operator">=</span> <span class="token punctuation">{</span> left<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span>
<span class="token comment">// 定义缓动曲线</span>
<span class="token keyword">const</span> easeCurve <span class="token operator">=</span> <span class="token string">'easeOutBounce'</span>
<span class="token comment">// 动画持续60帧</span>
<span class="token keyword">const</span> frameNum <span class="token operator">=</span> <span class="token number">60</span>

<span class="token keyword">const</span> <span class="token function-variable function">renderCircle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> left<span class="token punctuation">,</span> width <span class="token punctuation">}</span><span class="token operator">:</span> SquareState</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  square<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>left<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>
  square<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> animator <span class="token operator">=</span> <span class="token function">createAnimator</span><span class="token punctuation">(</span>renderCircle<span class="token punctuation">)</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">transition</span><span class="token punctuation">(</span>easeCurve<span class="token punctuation">,</span> startState<span class="token punctuation">,</span> endState<span class="token punctuation">,</span> frameNum<span class="token punctuation">)</span>

<span class="token comment">// 开始动画</span>
<span class="token function">animator</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 动画结束后的callback</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.469a78f3.js" defer></script><script src="/assets/js/2.bc631fca.js" defer></script><script src="/assets/js/14.bd3b3329.js" defer></script>
  </body>
</html>
