(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{282:function(t,i,e){"use strict";e(136),e(18);var n=e(22);i.a={data:function(){return{canvasDom:"",canvasWH:[0,0],ctx:"",centerPos:[0,0]}},methods:{initCanvas:function(t){var i=this,e=this.$nextTick;return new Promise((function(n){e((function(e){var r=i.$refs,a=i.labelRef,o=i.canvasWH,c=i.centerPos,s=i.canvasDom=r[t];i.labelDom=r[a],o[0]=s.clientWidth,o[1]=s.clientHeight,s.setAttribute("width",o[0]),s.setAttribute("height",o[1]),i.ctx=s.getContext("2d"),c[0]=o[0]/2,c[1]=o[1]/2,n()}))}))},clearCanvas:function(){var t=this.ctx,i=this.canvasWH;t.clearRect.apply(t,[0,0].concat(Object(n.a)(i)))}}}},285:function(t,i,e){var n=e(0),r=e(313),a=e(80);n({target:"Array",proto:!0},{fill:r}),a("fill")},313:function(t,i,e){"use strict";var n=e(14),r=e(81),a=e(15);t.exports=function(t){for(var i=n(this),e=a(i.length),o=arguments.length,c=r(o>1?arguments[1]:void 0,e),s=o>2?arguments[2]:void 0,h=void 0===s?e:r(s,e);h>c;)i[c++]=t;return i}},317:function(t,i,e){},361:function(t,i,e){"use strict";var n=e(0),r=e(23).findIndex,a=e(80),o=e(13),c=!0,s=o("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!s},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("findIndex")},362:function(t,i,e){"use strict";var n=e(0),r=e(81),a=e(37),o=e(15),c=e(14),s=e(90),h=e(59),u=e(41),f=e(13),l=u("splice"),v=f("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,p=Math.min;n({target:"Array",proto:!0,forced:!l||!v},{splice:function(t,i){var e,n,u,f,l,v,P=c(this),g=o(P.length),C=r(t,g),w=arguments.length;if(0===w?e=n=0:1===w?(e=0,n=g-C):(e=w-2,n=p(d(a(i),0),g-C)),g+e-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(u=s(P,n),f=0;f<n;f++)(l=C+f)in P&&h(u,f,P[l]);if(u.length=n,e<n){for(f=C;f<g-n;f++)v=f+e,(l=f+n)in P?P[v]=P[l]:delete P[v];for(f=g;f>g-n+e;f--)delete P[f-1]}else if(e>n)for(f=g-n;f>C;f--)v=f+e-1,(l=f+n-1)in P?P[v]=P[l]:delete P[v];for(f=0;f<e;f++)P[f+C]=arguments[f+2];return P.length=g-n+e,u}})},363:function(t,i,e){"use strict";var n=e(0),r=e(37),a=e(364),o=e(365),c=e(1),s=1..toFixed,h=Math.floor,u=function(t,i,e){return 0===i?e:i%2==1?u(t,i-1,e*t):u(t*t,i/2,e)};n({target:"Number",proto:!0,forced:s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){s.call({})}))},{toFixed:function(t){var i,e,n,c,s=a(this),f=r(t),l=[0,0,0,0,0,0],v="",d="0",p=function(t,i){for(var e=-1,n=i;++e<6;)n+=t*l[e],l[e]=n%1e7,n=h(n/1e7)},P=function(t){for(var i=6,e=0;--i>=0;)e+=l[i],l[i]=h(e/t),e=e%t*1e7},g=function(){for(var t=6,i="";--t>=0;)if(""!==i||0===t||0!==l[t]){var e=String(l[t]);i=""===i?e:i+o.call("0",7-e.length)+e}return i};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(v="-",s=-s),s>1e-21)if(e=(i=function(t){for(var i=0,e=t;e>=4096;)i+=12,e/=4096;for(;e>=2;)i+=1,e/=2;return i}(s*u(2,69,1))-69)<0?s*u(2,-i,1):s/u(2,i,1),e*=4503599627370496,(i=52-i)>0){for(p(0,e),n=f;n>=7;)p(1e7,0),n-=7;for(p(u(10,n,1),0),n=i-1;n>=23;)P(1<<23),n-=23;P(1<<n),p(1,1),P(2),d=g()}else p(0,e),p(1<<-i,0),d=g()+o.call("0",f);return d=f>0?v+((c=d.length)<=f?"0."+o.call("0",f-c)+d:d.slice(0,c-f)+"."+d.slice(c-f)):v+d}})},364:function(t,i,e){var n=e(25);t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},365:function(t,i,e){"use strict";var n=e(37),r=e(17);t.exports="".repeat||function(t){var i=String(r(this)),e="",a=n(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(i+=i))1&a&&(e+=i);return e}},366:function(t,i,e){"use strict";var n=e(317);e.n(n).a},397:function(t,i,e){"use strict";e.r(i);e(136),e(285),e(361),e(83),e(143),e(54),e(362),e(363),e(84);var n=e(22),r=e(61),a=(e(82),e(45)),o={name:"Draw",mixins:[e(282).a],props:{en:{type:Boolean,default:!1}},data:function(){return{mainColor:"#46bd87",cPMLColor:"#ffe793",bePointColor:["#30e8bd","#ee66aa"],mcPointColor:["#30c9e8","#ee6dee"],mcPointRadius:[5,4],drawAreaWH:[0,0],actionArea:[.7,.5],xPos:0,yPos:0,moveAction:!1,drawAreaOriginPos:[0,0],bezierCurve:[],lineData:"",lineDataTag:"",changedAxisLineData:[],clickPos:[0,0],hitPoint:!1,appendCP:!1}},watch:{hitPoint:function(t){var i=this.bezierCurve,e=this.changeAxis;if(!t)return!1;var n=e(i[t[0]][t[1]]);this.xPos=n[0],this.yPos=n[1]}},methods:{init:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function i(){var e,n,r,a,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e=t.initCanvas,n=t.calcDrawAreaConfig,r=t.initDrawAreaWH,i.next=3,e("canvas");case 3:r(),n(),a=t.initBezierCurveData,o=t.draw,a(),o();case 8:case"end":return i.stop()}}),i)})))()},initDrawAreaWH:function(){var t=Object(r.a)(this.actionArea,2),i=t[0],e=t[1],n=Object(r.a)(this.canvasWH,2),a=n[0],o=n[1];this.drawAreaWH=[i*a,e*o]},calcDrawAreaConfig:function(){var t=this.canvasWH,i=this.drawAreaWH,e=this.drawAreaOriginPos;e[0]=(t[0]-i[0])/2,e[1]=(t[1]-i[1])/2},initBezierCurveData:function(){this.bezierCurve=[];var t=this.bezierCurve,i=this.drawAreaWH,e=this.drawAreaOriginPos;t.push([[e[0],e[1]+i[1]]],[[e[0]+i[0],e[1]]])},draw:function(){var t=this.clearCanvas,i=this.drawGrid,e=this.drawPoints;t(),i(),e();var n=this.drawBezierCurveLine,r=this.drawCPMLine,a=this.calcLineData;n(),r(),a(),(0,this.emitEvent)()},drawGrid:function(){var t=this.ctx,i=this.drawAreaOriginPos,e=this.drawAreaWH,r=this.mainColor;t.strokeStyle=r,t.strokeRect.apply(t,Object(n.a)(i).concat(Object(n.a)(e)))},drawPoints:function(){var t=this.drawItemPoints;this.bezierCurve.forEach((function(i,e){return t(i,e)}))},drawItemPoints:function(t,i){var e=this.ctx,r=this.bezierCurve,a=this.bePointColor,o=this.mcPointColor,c=this.mcPointRadius,s=r.length-1;t.forEach((function(t,r){if((0!==i||1!==r)&&(i!==s||2!==r)&&t){var h=0;0===r?(e.fillStyle=o[0],0===i&&(e.fillStyle=a[0]),i===s&&(e.fillStyle=a[1]),h=c[0]):(e.fillStyle=o[1],h=c[1]),e.beginPath(),e.arc.apply(e,Object(n.a)(t).concat([h,0,2*Math.PI])),e.fill()}}))},drawBezierCurveLine:function(){var t=this.ctx,i=this.bezierCurve,e=this.mainColor,r=i.length-1;t.beginPath(),i.forEach((function(e,a){if(a!==r){0===a&&t.moveTo.apply(t,Object(n.a)(e[0]));var o=i[a+1],c=e[2]||e[0],s=o[1]||o[0],h=o[0];t.bezierCurveTo.apply(t,Object(n.a)(c).concat(Object(n.a)(s),Object(n.a)(h)))}})),t.strokeStyle=e,t.stroke()},drawCPMLine:function(){var t=this.ctx,i=this.cPMLColor,e=this.bezierCurve;t.strokeStyle=i,e.forEach((function(i){var e=i[0];i.forEach((function(i,r){0!==r&&i&&(t.beginPath(),t.moveTo.apply(t,Object(n.a)(e)),t.lineTo.apply(t,Object(n.a)(i)),t.stroke())}))}))},mouseDonwHandler:function(t){var i=t.offsetX,e=t.offsetY,n=this.checkClickIsInDrawArea,r=this.checkClickResult,a=this.bezierCurve,o=this.draw,c=n([i,e]),s=r([i,e]),h=a.length-1;c&&!s&&a.splice(h,0,[[i,e]]),this.appendCP=c&&!s,this.hitPoint=s,this.moveAction=!0,o()},mouseMoveHandler:function(t){var i=t.offsetX,e=t.offsetY,n=this.moveAction,r=this.appendCP,a=this.hitPoint;if(n&&(r||a)){this.clickPos=[i,e];var o=this.doDrag,c=this.draw;o(),c()}},doDrag:function(){var t=this.appendCP,i=this.hitPoint,e=this.moveNewCP,n=this.movePoint;t&&e(),i&&n()},moveNewCP:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.bezierCurve,e=(this.appendCP,this.clickPos),n=this.getNewBeginPoint,r=i.length-2,a=t;!1===a&&(a=r);var o=i[a][0],c=e,s=n(e,o);i[a][1]=s,i[a][2]=c},movePoint:function(){var t=this.hitPoint,i=this.bezierCurve,e=(this.moveNewCP,this.clickPos),n=this.changeAxis,r=i.length-1;if(0!==t[0]&&t[0]!==r){var a=e;if(0===t[1]){var o=i[t[0]-1][0];a[0]<=o[0]&&(a[0]=o[0]+2)}i[t[0]][t[1]]=a;var c=n(a);this.xPos=c[0],this.yPos=c[1]}},getNewBeginPoint:function(t,i){var e=Object(r.a)(t,2),n=e[0],a=e[1],o=Object(r.a)(i,2),c=o[0],s=o[1];return[c-(n-c),s-(a-s)]},mouseUpHandler:function(){this.moveAction=!1},checkClickIsInDrawArea:function(t){var i=Object(r.a)(t,2),e=i[0],n=i[1],a=this.drawAreaOriginPos,o=this.drawAreaWH,c=a[0],s=a[1],h=a[0]+o[0],u=a[1]+o[1];return!(e>h||e<c)&&!(n>u||n<s)},checkClickResult:function(t){var i=this.bezierCurve,e=this.checkIsClickItemPoint,n=!1,r=i.findIndex((function(i,r){return!1!==(n=e(i,r,t))}));return-1!==r&&[r,n]},checkIsClickItemPoint:function(t,i,e){var n=this.checkIsClickPoint,r=t.findIndex((function(t,r){return!1!==n(t,i,r,e)}));return-1!==r&&r},checkIsClickPoint:function(t,i,e,n){var r=this.bezierCurve,a=this.checkClickIsInCircle,o=this.mcPointRadius,c=r.length-1;return(0!==i||1!==e)&&((i!==c||2!==e)&&(!!a(n,t,o[e>0?1:0])&&e))},checkClickIsInCircle:function(t,i,e){var n=Math.abs,r=Math.sqrt,a=n(t[0]-i[0]),o=n(t[1]-i[1]);return r(a*a+o*o)<e},calcLineData:function(){var t=this.calcLineDataString,i=this.calcLineDataStringTag,e=this.changeAxis,n=this.bezierCurve.map((function(t){return t.map((function(t){return t?e(t):""}))}));this.changedAxisLineData=n,t(n),i(n)},calcLineDataString:function(t){var i="[";t.forEach((function(t,e){0===e&&(i+="["),0!==e&&(i+=",["),t.forEach((function(t,e){0!==e&&(i+=", "),i+=t?"[".concat(t[0],", ").concat(t[1],"]"):"['']"})),i+="]"})),i+="]",this.lineData=i},calcLineDataStringTag:function(t){var i="[ ";t.forEach((function(t,e){0===e&&(i+="[ "),0!==e&&(i+=", [ "),t.forEach((function(t,e){0!==e&&(i+=", "),i+=t?"[ <span>".concat(t[0],"</span>, <span>").concat(t[1],"</span> ]"):"[ <span>''</span> ]"})),i+=" ]"})),i+=" ]",this.lineDataTag=i},emitEvent:function(){var t=this.changedAxisLineData;this.$emit("input",t)},changeAxis:function(t){var i=Object(r.a)(t,2),e=i[0],n=i[1],a=Object(r.a)(this.drawAreaOriginPos,2),o=a[0],c=a[1],s=Object(r.a)(this.drawAreaWH,2),h=s[0],u=s[1];return[((e-o)/h).toFixed(3),((n-c)/u).toFixed(3)]},axisChange:function(t){var i=Object(r.a)(t,2),e=i[0],n=i[1],a=Object(r.a)(this.drawAreaOriginPos,2),o=a[0],c=a[1],s=Object(r.a)(this.drawAreaWH,2);return[e*s[0]+o,n*s[1]+c]},deletePoint:function(){var t=this.hitPoint,i=this.bezierCurve,e=this.draw;if(t){t.join("");var n=i.length-1;0!==t[0]&&t[0]!==n&&(0===t[1]&&i.splice(t[0],1),0!==t[1]&&(i[t[0]][t[1]]=""),e())}},reDraw:function(){var t=this.initBezierCurveData,i=this.draw;t(),i()}},mounted:function(){(0,this.init)()}},c=(e(366),e(33)),s=Object(c.a)(o,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"draw"}},[e("div",{staticClass:"action-container"},[e("div",{staticClass:"point-position"},[e("div",[t._v("X:"),e("input",{attrs:{type:"text",placeholder:"xPos",readonly:""},domProps:{value:t.xPos}})]),t._v(" "),e("div",[t._v("Y:"),e("input",{attrs:{type:"text",placeholder:"yPos",readonly:""},domProps:{value:t.yPos}})])]),t._v(" "),e("div",{staticClass:"action"},[e("div",{staticClass:"delete-point",on:{click:t.deletePoint}},[t._v(t._s(t.en?"Delete Point":"删除该点"))]),t._v(" "),e("div",{staticClass:"redraw",on:{click:t.reDraw}},[t._v(t._s(t.en?"Re Draw":"重新绘制"))])])]),t._v(" "),e("div",{staticClass:"linedata",domProps:{innerHTML:t._s(t.lineDataTag)}}),t._v(" "),e("click-to-copy",{attrs:{info:t.lineData}}),t._v(" "),e("div",{staticClass:"canvas-container"},[e("canvas",{ref:"canvas",on:{mousedown:t.mouseDonwHandler,mousemove:t.mouseMoveHandler,mouseup:t.mouseUpHandler}})])],1)}),[],!1,null,null,null);i.default=s.exports}}]);