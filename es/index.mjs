/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(){return(n=Object.assign||function(n){for(var r,t=1,e=arguments.length;e>t;t++)for(var u in r=arguments[t])Object.prototype.hasOwnProperty.call(r,u)&&(n[u]=r[u]);return n}).apply(this,arguments)},r=new Map([]);function t(n,r){var t=function(n,r){for(var t,e,u=n.length,a=u-1,i=0;u>i;i++){if(i!==a)if(e=n[i+1],r>=(t=n[i])[0][0]&&e[0][0]>r)break}return[t[0],t[2]||t[0],e[1]||e[0],e[0]]}(n,r);return function(n,r){var t=n[1][1],e=n[2][1],u=n[3][1],a=1-r;return 1-(n[0][1]*Math.pow(a,3)+3*t*r*Math.pow(a,2)+3*e*Math.pow(r,2)*a+u*Math.pow(r,3))}(t,function(n,r){var t=n[0][0];return(r-t)/(n[3][0]-t)}(t,r))}function e(n,e){var u;u="string"==typeof n?r.get(n):n;var a=1/(e-1);return Array(e).fill(0).map((function(n,r){return r*a})).map((function(n){return t(u,n)}))}function u(n,t){return n&&t?(r.set(n,t),!0):(console.error("InjectNewCurve: Missing Parameters!"),!1)}var a=function(n,r,t,e){return(n/=e)<1/2.75?t*(7.5625*n*n)+r:2/2.75>n?t*(7.5625*(n-=1.5/2.75)*n+.75)+r:2.5/2.75>n?t*(7.5625*(n-=2.25/2.75)*n+.9375)+r:t*(7.5625*(n-=2.625/2.75)*n+.984375)+r},i=function(n,r,t,e){return t-a(e-n,0,t,e)+r},o=new Map([["linear",function(n,r,t,e){return t*n/e+r}],["easeInSine",function(n,r,t,e){return-t*Math.cos(n/e*(Math.PI/2))+t+r}],["easeOutSine",function(n,r,t,e){return t*Math.sin(n/e*(Math.PI/2))+r}],["easeInOutSine",function(n,r,t,e){return-t/2*(Math.cos(Math.PI*n/e)-1)+r}],["easeInQuad",function(n,r,t,e){return t*(n/=e)*n+r}],["easeOutQuad",function(n,r,t,e){return-t*(n/=e)*(n-2)+r}],["easeInOutQuad",function(n,r,t,e){return 1>(n/=e/2)?t/2*n*n+r:-t/2*(--n*(n-2)-1)+r}],["easeInCubic",function(n,r,t,e){return t*(n/=e)*n*n+r}],["easeOutCubic",function(n,r,t,e){return t*((n=n/e-1)*n*n+1)+r}],["easeInOutCubic",function(n,r,t,e){return 1>(n/=e/2)?t/2*n*n*n+r:t/2*((n-=2)*n*n+2)+r}],["easeInQuart",function(n,r,t,e){return t*(n/=e)*n*n*n+r}],["easeOutQuart",function(n,r,t,e){return-t*((n=n/e-1)*n*n*n-1)+r}],["easeInOutQuart",function(n,r,t,e){return 1>(n/=e/2)?t/2*n*n*n*n+r:-t/2*((n-=2)*n*n*n-2)+r}],["easeInQuint",function(n,r,t,e){return t*(n/=e)*n*n*n*n+r}],["easeOutQuint",function(n,r,t,e){return t*((n=n/e-1)*n*n*n*n+1)+r}],["easeInOutQuint",function(n,r,t,e){return 1>(n/=e/2)?t/2*n*n*n*n*n+r:t/2*((n-=2)*n*n*n*n+2)+r}],["easeInBack",function(n,r,t,e){var u=1.70158;return t*(n/=e)*n*((u+1)*n-u)+r}],["easeOutBack",function(n,r,t,e){var u=1.70158;return t*((n=n/e-1)*n*((u+1)*n+u)+1)+r}],["easeInOutBack",function(n,r,t,e){var u=1.70158;return 1>(n/=e/2)?t/2*(n*n*((1+(u*=1.525))*n-u))+r:t/2*((n-=2)*n*((1+(u*=1.525))*n+u)+2)+r}],["easeInElastic",function(n,r,t,e){return 0===n?r:1==(n/=e)?r+t:-t*Math.pow(2,10*(n-=1))*Math.sin(2*Math.PI*(n*e-.3*e/4)/(.3*e))+r}],["easeOutElastic",function(n,r,t,e){return 0===n?r:1==(n/=e)?r+t:t*Math.pow(2,-10*n)*Math.sin(2*Math.PI*(n*e-.3*e/4)/(.3*e))+t+r}],["easeInOutElastic",function(n,r,t,e){if(0===n)return r;if(2==(n/=e/2))return r+t;var u=e*(.3*1.5),a=u/4;return 1>n?t*Math.pow(2,10*(n-=1))*Math.sin(2*Math.PI*(n*e-a)/u)*-.5+r:t*Math.pow(2,-10*(n-=1))*Math.sin(2*Math.PI*(n*e-a)/u)*.5+t+r}],["easeInBounce",i],["easeOutBounce",a],["easeInOutBounce",function(n,r,t,e){return e/2>n?.5*i(2*n,0,t,e)+r:.5*a(2*n-e,0,t,e)+.5*t+r}]]);function c(n,r){void 0===r&&(r=30);var t=1/(r-1),e=o.get(n);return Array(r).fill(0).map((function(n,u){return e(u*t,0,1,r)}))}function f(n){var t=n instanceof Array,e=r.has(n),u=o.has(n);if(t)return"transitionCurve";if(e)return"transitionCurveName";if(u)return"tween";throw Error("Transition: Invalid dynamic of "+n)}function s(n){return Object.prototype.toString.call(n).replace(/\[object |\]/g,"").toLowerCase()}function h(n){var r=s(n);return"array"===r||"object"===r}function p(n,r){return Array(r).fill(0).map((function(r){return n}))}function v(r,t,e){return r.map((function(r,u){var a;return n(n({},r),((a={})[e]=t[u],a))}))}function l(n){return n?[]:{}}function M(n,r,t){var e=r-n;return t.map((function(r){return n+e*r}))}function I(n,r,t,u,a){if(void 0===u&&(u=30),void 0===a&&(a=!1),function(n,r,t,e){var u=[n,r,t,e].map(s);if(u.find((function(n){return"undefined"===n})))throw Error("transition: Missing Parameters!");if(u[1]!==u[2])throw Error("transition: The start state type and the end state type are inconsistent!");if("number"!==u[3]||0>=e)throw Error("Transition: frameNum should be a number and greater than 1");f(n)}(n,r,t,u),!function(n){var r=s(n);return["number","array","object"].includes(r)}(r))return console.warn("Transition: Only supports array number and object types"),[r,t];try{return function n(r,t,e,u){var a=s(r),i=e.length;if("number"===a)return M(r,t,e);var o="array"===a,c=Array(i).fill(o).map(l);for(var f in t){var I=r[f],m=t[f];c=v(c,Number.isFinite(m)?M(I,m,e):h(m)&&u?n(I,m,e,u):p(m,i),f)}return c}(r,t,function(n,r){return void 0===r&&(r=30),("tween"===f(n)?c:e)(n,r)}(n,u),a)}catch(n){return console.warn("Transition: parameter may be abnormal!"),[t]}}export{u as extendCurves,I as transition};
